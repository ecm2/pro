(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{1054:function(t,s){t.exports="data:image/png;base64,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"},1055:function(t,s,a){t.exports=a.p+"assets/img/img013.86c046ee.png"},2018:function(t,s,a){"use strict";a.r(s);var n=a(44),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_1、概念"}},[t._v("1、概念")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1微观"}},[t._v("①微观")])]),n("li",[n("a",{attrs:{href:"#_2宏观"}},[t._v("②宏观")])])])]),n("li",[n("a",{attrs:{href:"#_2、异常映射的好处"}},[t._v("2、异常映射的好处")])]),n("li",[n("a",{attrs:{href:"#_3、基于-xml-的异常映射"}},[t._v("3、基于 XML 的异常映射")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1配置"}},[t._v("①配置")])]),n("li",[n("a",{attrs:{href:"#_2异常范围"}},[t._v("②异常范围")])])])]),n("li",[n("a",{attrs:{href:"#_4、基于注解的异常映射"}},[t._v("4、基于注解的异常映射")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1创建异常处理器类"}},[t._v("①创建异常处理器类")])]),n("li",[n("a",{attrs:{href:"#_2异常处理器类加入-ioc-容器"}},[t._v("②异常处理器类加入 IOC 容器")])]),n("li",[n("a",{attrs:{href:"#_3给异常处理器类标记注解"}},[t._v("③给异常处理器类标记注解")])]),n("li",[n("a",{attrs:{href:"#_4声明处理异常的方法"}},[t._v("④声明处理异常的方法")])])])]),n("li",[n("a",{attrs:{href:"#_5、区分请求类型"}},[t._v("5、区分请求类型")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1分析"}},[t._v("①分析")])]),n("li",[n("a",{attrs:{href:"#_2判断依据"}},[t._v("②判断依据")])]),n("li",[n("a",{attrs:{href:"#_3兼容两种请求的处理方法"}},[t._v("③兼容两种请求的处理方法")])])])])])]),n("p"),t._v(" "),n("h1",{attrs:{id:"第五节-异常映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五节-异常映射"}},[t._v("#")]),t._v(" 第五节 异常映射")]),t._v(" "),n("h2",{attrs:{id:"_1、概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、概念"}},[t._v("#")]),t._v(" 1、概念")]),t._v(" "),n("h3",{attrs:{id:"_1微观"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1微观"}},[t._v("#")]),t._v(" ①微观")]),t._v(" "),n("p",[t._v("将异常类型和某个具体的视图关联起来，建立映射关系。好处是可以通过 SpringMVC 框架来帮助我们管理异常。")]),t._v(" "),n("ul",[n("li",[t._v("声明式管理异常：在配置文件中指定异常类型和视图之间的对应关系。在配置文件或注解类中统一管理。")]),t._v(" "),n("li",[t._v("编程式管理异常：需要我们自己手动 try ... catch ... 捕获异常，然后再手动跳转到某个页面。")])]),t._v(" "),n("h3",{attrs:{id:"_2宏观"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2宏观"}},[t._v("#")]),t._v(" ②宏观")]),t._v(" "),n("p",[t._v("整个项目从架构这个层面设计的异常处理的统一机制和规范。")]),t._v(" "),n("p",[t._v("一个项目中会包含很多个模块，各个模块需要分工完成。如果张三负责的模块按照 A 方案处理异常，李四负责的模块按照 B 方案处理异常……各个模块处理异常的思路、代码、命名细节都不一样，那么就会让整个项目非常混乱。")]),t._v(" "),n("h2",{attrs:{id:"_2、异常映射的好处"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、异常映射的好处"}},[t._v("#")]),t._v(" 2、异常映射的好处")]),t._v(" "),n("ul",[n("li",[t._v("使用声明式代替编程式来实现异常管理\n"),n("ul",[n("li",[t._v("让异常控制和核心业务解耦，二者各自维护，结构性更好")])])]),t._v(" "),n("li",[t._v("整个项目层面使用同一套规则来管理异常\n"),n("ul",[n("li",[t._v("整个项目代码风格更加统一、简洁")]),t._v(" "),n("li",[t._v("便于团队成员之间的彼此协作")])])])]),t._v(" "),n("h2",{attrs:{id:"_3、基于-xml-的异常映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、基于-xml-的异常映射"}},[t._v("#")]),t._v(" 3、基于 XML 的异常映射")]),t._v(" "),n("h3",{attrs:{id:"_1配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1配置"}},[t._v("#")]),t._v(" ①配置")]),t._v(" "),n("p",[t._v("SpringMVC 会根据异常映射信息，在捕获到指定异常对象后，将异常对象存入请求域，然后转发到和异常类型关联的视图。")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("exceptionResolver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 配置异常映射关系 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("exceptionMappings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- key属性：指定异常类型 --\x3e")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 文本标签体：和异常类型对应的逻辑视图 --\x3e")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prop")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.ArithmeticException"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("error-arith"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 使用 exceptionAttribute 属性配置将异常对象存入请求域时使用的属性名 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 这个属性名默认是exception --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("exceptionAttribute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("atguiguException"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("h3",{attrs:{id:"_2异常范围"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2异常范围"}},[t._v("#")]),t._v(" ②异常范围")]),t._v(" "),n("p",[t._v("如果在配置文件中，发现有多个匹配的异常类型，那么 SpringMVC 会采纳范围上最接近的异常映射关系。")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prop")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.ArithmeticException"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("error-arith"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prop")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.RuntimeException"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("error-runtime"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("h2",{attrs:{id:"_4、基于注解的异常映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、基于注解的异常映射"}},[t._v("#")]),t._v(" 4、基于注解的异常映射")]),t._v(" "),n("h3",{attrs:{id:"_1创建异常处理器类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1创建异常处理器类"}},[t._v("#")]),t._v(" ①创建异常处理器类")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1054),alt:"./images"}})]),t._v(" "),n("h3",{attrs:{id:"_2异常处理器类加入-ioc-容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2异常处理器类加入-ioc-容器"}},[t._v("#")]),t._v(" ②异常处理器类加入 IOC 容器")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("context:")]),t._v("component-scan")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("base-package")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.atguigu.mvc.handler,com.atguigu.mvc.exception"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3给异常处理器类标记注解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3给异常处理器类标记注解"}},[t._v("#")]),t._v(" ③给异常处理器类标记注解")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异常处理器类需要使用 @ControllerAdvice 注解标记")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ControllerAdvice")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyExceptionHandler")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h3",{attrs:{id:"_4声明处理异常的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4声明处理异常的方法"}},[t._v("#")]),t._v(" ④声明处理异常的方法")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @ExceptionHandler注解：标记异常处理方法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// value属性：指定匹配的异常类型")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异常类型的形参：SpringMVC 捕获到的异常对象")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExceptionHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NullPointerException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveNullPointerException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们可以自己手动将异常对象存入模型")]),t._v("\n    model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"atguiguException"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回逻辑视图名称")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error-nullpointer"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("当同一个异常类型在基于 XML 和注解的配置中都能够找到对应的映射，那么以注解为准。")]),t._v(" "),n("h2",{attrs:{id:"_5、区分请求类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、区分请求类型"}},[t._v("#")]),t._v(" 5、区分请求类型")]),t._v(" "),n("h3",{attrs:{id:"_1分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1分析"}},[t._v("#")]),t._v(" ①分析")]),t._v(" "),n("p",[t._v("异常处理机制和拦截器机制都面临这样的问题：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1055),alt:"./images"}})]),t._v(" "),n("h3",{attrs:{id:"_2判断依据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2判断依据"}},[t._v("#")]),t._v(" ②判断依据")]),t._v(" "),n("p",[t._v("查看请求消息头中是否包含 Ajax 请求独有的特征：")]),t._v(" "),n("ul",[n("li",[t._v("Accept 请求消息头：包含 application/json")]),t._v(" "),n("li",[t._v("X-Requested-With 请求消息头：包含 XMLHttpRequest")])]),t._v(" "),n("p",[t._v("两个条件满足一个即可。")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 判断当前请求是否为Ajax请求\n * @param request 请求对象\n * @return\n * \t\ttrue：当前请求是Ajax请求\n * \t\tfalse：当前请求不是Ajax请求\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("judgeRequestType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \t\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.获取请求消息头")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" acceptHeader "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" xRequestHeader "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-Requested-With"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.判断")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("acceptHeader "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" acceptHeader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \t\t\t\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n \t\t\t\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xRequestHeader "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" xRequestHeader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"XMLHttpRequest"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br")])]),n("h3",{attrs:{id:"_3兼容两种请求的处理方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3兼容两种请求的处理方法"}},[t._v("#")]),t._v(" ③兼容两种请求的处理方法")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExceptionHandler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveException")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用工具方法判断当前请求是否是 Ajax 请求")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" judgeResult "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MVCUtil")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("judgeRequestType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("judgeResult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对 Ajax 请求返回字符串作为响应体")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/html;charset=UTF-8"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWriter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上面已经使用原生 response 对象返回了响应，这里就不返回视图名称了")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对普通请求返回逻辑视图名称")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error-exception"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("p",[n("RouterLink",{attrs:{to:"/pro001-fengJie/pro005-SpringMVC/lecture/chapter04/verse04.html"}},[t._v("上一节")]),t._v(" "),n("RouterLink",{attrs:{to:"/pro001-fengJie/pro005-SpringMVC/lecture/chapter04/index.html"}},[t._v("回目录")]),t._v(" "),n("RouterLink",{attrs:{to:"/pro001-fengJie/pro005-SpringMVC/lecture/chapter04/verse06.html"}},[t._v("下一节")])],1)])}),[],!1,null,null,null);s.default=e.exports}}]);