<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaDocs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="JavaDocs">
    
    <link rel="preload" href="/pro/assets/css/0.styles.0f33a937.css" as="style"><link rel="preload" href="/pro/assets/js/app.fc49af57.js" as="script"><link rel="preload" href="/pro/assets/js/6.72f294c0.js" as="script"><link rel="preload" href="/pro/assets/js/62.d9a2c8d3.js" as="script"><link rel="prefetch" href="/pro/assets/js/10.daaf0eac.js"><link rel="prefetch" href="/pro/assets/js/100.4bda2965.js"><link rel="prefetch" href="/pro/assets/js/101.1c7c3ef2.js"><link rel="prefetch" href="/pro/assets/js/102.d33a747c.js"><link rel="prefetch" href="/pro/assets/js/103.039cfef3.js"><link rel="prefetch" href="/pro/assets/js/104.7fd48d57.js"><link rel="prefetch" href="/pro/assets/js/105.3baddbd3.js"><link rel="prefetch" href="/pro/assets/js/106.d248c985.js"><link rel="prefetch" href="/pro/assets/js/107.746fdea3.js"><link rel="prefetch" href="/pro/assets/js/108.2cc8f8a3.js"><link rel="prefetch" href="/pro/assets/js/109.625913ff.js"><link rel="prefetch" href="/pro/assets/js/11.9df9194f.js"><link rel="prefetch" href="/pro/assets/js/110.ae838e73.js"><link rel="prefetch" href="/pro/assets/js/111.6fe99d55.js"><link rel="prefetch" href="/pro/assets/js/112.3e008a73.js"><link rel="prefetch" href="/pro/assets/js/113.9f8d146a.js"><link rel="prefetch" href="/pro/assets/js/114.b74c9906.js"><link rel="prefetch" href="/pro/assets/js/115.44fcb37c.js"><link rel="prefetch" href="/pro/assets/js/116.8d301cee.js"><link rel="prefetch" href="/pro/assets/js/117.c1b33962.js"><link rel="prefetch" href="/pro/assets/js/118.2f7d33ee.js"><link rel="prefetch" href="/pro/assets/js/119.321f6973.js"><link rel="prefetch" href="/pro/assets/js/12.8407e3e9.js"><link rel="prefetch" href="/pro/assets/js/120.7306699d.js"><link rel="prefetch" href="/pro/assets/js/121.240c478d.js"><link rel="prefetch" href="/pro/assets/js/122.98c36b9c.js"><link rel="prefetch" href="/pro/assets/js/123.ec7bdea5.js"><link rel="prefetch" href="/pro/assets/js/124.a8cd4b86.js"><link rel="prefetch" href="/pro/assets/js/125.d5cd8bb8.js"><link rel="prefetch" href="/pro/assets/js/126.3c5e74d2.js"><link rel="prefetch" href="/pro/assets/js/127.ed7986a5.js"><link rel="prefetch" href="/pro/assets/js/128.da8647d2.js"><link rel="prefetch" href="/pro/assets/js/129.779993d8.js"><link rel="prefetch" href="/pro/assets/js/13.e4fea27b.js"><link rel="prefetch" href="/pro/assets/js/130.ce81961f.js"><link rel="prefetch" href="/pro/assets/js/131.7da4afba.js"><link rel="prefetch" href="/pro/assets/js/132.e37384b5.js"><link rel="prefetch" href="/pro/assets/js/133.72cc5613.js"><link rel="prefetch" href="/pro/assets/js/134.ca0573aa.js"><link rel="prefetch" href="/pro/assets/js/135.a2e8a0e3.js"><link rel="prefetch" href="/pro/assets/js/136.9bb835c5.js"><link rel="prefetch" href="/pro/assets/js/137.2690460f.js"><link rel="prefetch" href="/pro/assets/js/138.25a74226.js"><link rel="prefetch" href="/pro/assets/js/139.f70d1d1c.js"><link rel="prefetch" href="/pro/assets/js/14.95016f0e.js"><link rel="prefetch" href="/pro/assets/js/140.67a1377e.js"><link rel="prefetch" href="/pro/assets/js/141.a19fe599.js"><link rel="prefetch" href="/pro/assets/js/142.2b6419a7.js"><link rel="prefetch" href="/pro/assets/js/143.308ae89b.js"><link rel="prefetch" href="/pro/assets/js/144.d8a59337.js"><link rel="prefetch" href="/pro/assets/js/145.5341e3f8.js"><link rel="prefetch" href="/pro/assets/js/146.0d1be921.js"><link rel="prefetch" href="/pro/assets/js/147.d5f87764.js"><link rel="prefetch" href="/pro/assets/js/148.83918129.js"><link rel="prefetch" href="/pro/assets/js/149.7c89b683.js"><link rel="prefetch" href="/pro/assets/js/15.c1c144d7.js"><link rel="prefetch" href="/pro/assets/js/150.69e13076.js"><link rel="prefetch" href="/pro/assets/js/151.0edc1839.js"><link rel="prefetch" href="/pro/assets/js/152.41c7137e.js"><link rel="prefetch" href="/pro/assets/js/153.2da21929.js"><link rel="prefetch" href="/pro/assets/js/154.4f33b549.js"><link rel="prefetch" href="/pro/assets/js/155.e172f030.js"><link rel="prefetch" href="/pro/assets/js/156.4c90b099.js"><link rel="prefetch" href="/pro/assets/js/157.672e9235.js"><link rel="prefetch" href="/pro/assets/js/158.fe053f9f.js"><link rel="prefetch" href="/pro/assets/js/159.7bd25e88.js"><link rel="prefetch" href="/pro/assets/js/16.afc4319b.js"><link rel="prefetch" href="/pro/assets/js/160.16bf8796.js"><link rel="prefetch" href="/pro/assets/js/161.a4f03362.js"><link rel="prefetch" href="/pro/assets/js/162.216cd3b0.js"><link rel="prefetch" href="/pro/assets/js/163.f253af0f.js"><link rel="prefetch" href="/pro/assets/js/164.d9cd6ca6.js"><link rel="prefetch" href="/pro/assets/js/165.3b274dbe.js"><link rel="prefetch" href="/pro/assets/js/166.41cde03e.js"><link rel="prefetch" href="/pro/assets/js/167.a3cbca3a.js"><link rel="prefetch" href="/pro/assets/js/168.b176287f.js"><link rel="prefetch" href="/pro/assets/js/169.e33fb7c6.js"><link rel="prefetch" href="/pro/assets/js/17.efb82315.js"><link rel="prefetch" href="/pro/assets/js/170.8e1e1969.js"><link rel="prefetch" href="/pro/assets/js/171.b70d6b5e.js"><link rel="prefetch" href="/pro/assets/js/172.0d754141.js"><link rel="prefetch" href="/pro/assets/js/173.05ad932a.js"><link rel="prefetch" href="/pro/assets/js/174.049d6251.js"><link rel="prefetch" href="/pro/assets/js/175.25310f2d.js"><link rel="prefetch" href="/pro/assets/js/176.e8a81d92.js"><link rel="prefetch" href="/pro/assets/js/177.d90caf35.js"><link rel="prefetch" href="/pro/assets/js/178.cf1cf1bf.js"><link rel="prefetch" href="/pro/assets/js/179.4476db3b.js"><link rel="prefetch" href="/pro/assets/js/18.0db7a134.js"><link rel="prefetch" href="/pro/assets/js/180.58fb3da5.js"><link rel="prefetch" href="/pro/assets/js/181.10bc7c3a.js"><link rel="prefetch" href="/pro/assets/js/182.2905833b.js"><link rel="prefetch" href="/pro/assets/js/183.413456a9.js"><link rel="prefetch" href="/pro/assets/js/184.0ba0e068.js"><link rel="prefetch" href="/pro/assets/js/185.c51ccef2.js"><link rel="prefetch" href="/pro/assets/js/186.7b41a69d.js"><link rel="prefetch" href="/pro/assets/js/187.b37fc6d2.js"><link rel="prefetch" href="/pro/assets/js/188.33695657.js"><link rel="prefetch" href="/pro/assets/js/189.7bfbc243.js"><link rel="prefetch" href="/pro/assets/js/19.7fa8a6b8.js"><link rel="prefetch" href="/pro/assets/js/190.b1b951e1.js"><link rel="prefetch" href="/pro/assets/js/191.3c538d30.js"><link rel="prefetch" href="/pro/assets/js/192.727c2453.js"><link rel="prefetch" href="/pro/assets/js/193.763b87ea.js"><link rel="prefetch" href="/pro/assets/js/194.726f2e3d.js"><link rel="prefetch" href="/pro/assets/js/195.84e43e6c.js"><link rel="prefetch" href="/pro/assets/js/196.dc1e836e.js"><link rel="prefetch" href="/pro/assets/js/197.e54092be.js"><link rel="prefetch" href="/pro/assets/js/198.6340a77c.js"><link rel="prefetch" href="/pro/assets/js/199.5654cc94.js"><link rel="prefetch" href="/pro/assets/js/2.1225e9b4.js"><link rel="prefetch" href="/pro/assets/js/20.97ac885e.js"><link rel="prefetch" href="/pro/assets/js/200.50d882e0.js"><link rel="prefetch" href="/pro/assets/js/201.b4d8d4c2.js"><link rel="prefetch" href="/pro/assets/js/202.494743fd.js"><link rel="prefetch" href="/pro/assets/js/203.188e4486.js"><link rel="prefetch" href="/pro/assets/js/204.f4abdce1.js"><link rel="prefetch" href="/pro/assets/js/205.fb097973.js"><link rel="prefetch" href="/pro/assets/js/206.c87a2f0c.js"><link rel="prefetch" href="/pro/assets/js/207.e3ea2bea.js"><link rel="prefetch" href="/pro/assets/js/208.62eb20b5.js"><link rel="prefetch" href="/pro/assets/js/209.4ae98ccc.js"><link rel="prefetch" href="/pro/assets/js/21.fb14ab9e.js"><link rel="prefetch" href="/pro/assets/js/210.ca0e0238.js"><link rel="prefetch" href="/pro/assets/js/211.4279f359.js"><link rel="prefetch" href="/pro/assets/js/212.7c6bbef4.js"><link rel="prefetch" href="/pro/assets/js/213.ee1e3df4.js"><link rel="prefetch" href="/pro/assets/js/214.f3083281.js"><link rel="prefetch" href="/pro/assets/js/215.b003d911.js"><link rel="prefetch" href="/pro/assets/js/216.eb102128.js"><link rel="prefetch" href="/pro/assets/js/217.22a48f53.js"><link rel="prefetch" href="/pro/assets/js/218.2150478a.js"><link rel="prefetch" href="/pro/assets/js/219.421f1027.js"><link rel="prefetch" href="/pro/assets/js/22.73e0ab15.js"><link rel="prefetch" href="/pro/assets/js/220.a09eabff.js"><link rel="prefetch" href="/pro/assets/js/221.e0955959.js"><link rel="prefetch" href="/pro/assets/js/222.be029dcb.js"><link rel="prefetch" href="/pro/assets/js/223.9c146a44.js"><link rel="prefetch" href="/pro/assets/js/224.51738383.js"><link rel="prefetch" href="/pro/assets/js/225.966bd25b.js"><link rel="prefetch" href="/pro/assets/js/226.cd924613.js"><link rel="prefetch" href="/pro/assets/js/227.bdcff1cb.js"><link rel="prefetch" href="/pro/assets/js/228.a3444a64.js"><link rel="prefetch" href="/pro/assets/js/229.58e66d6c.js"><link rel="prefetch" href="/pro/assets/js/23.cb702c46.js"><link rel="prefetch" href="/pro/assets/js/230.cf8e7d9b.js"><link rel="prefetch" href="/pro/assets/js/231.11ecc275.js"><link rel="prefetch" href="/pro/assets/js/232.dce3a4c9.js"><link rel="prefetch" href="/pro/assets/js/233.cb46678c.js"><link rel="prefetch" href="/pro/assets/js/234.a6aa038f.js"><link rel="prefetch" href="/pro/assets/js/235.107d8633.js"><link rel="prefetch" href="/pro/assets/js/236.fea479b1.js"><link rel="prefetch" href="/pro/assets/js/237.211f7378.js"><link rel="prefetch" href="/pro/assets/js/238.f46a8d29.js"><link rel="prefetch" href="/pro/assets/js/239.0a3920c1.js"><link rel="prefetch" href="/pro/assets/js/24.956c5f93.js"><link rel="prefetch" href="/pro/assets/js/240.6bfb6e7f.js"><link rel="prefetch" href="/pro/assets/js/241.d8e870e5.js"><link rel="prefetch" href="/pro/assets/js/242.ccf0b4ac.js"><link rel="prefetch" href="/pro/assets/js/243.a2464b57.js"><link rel="prefetch" href="/pro/assets/js/244.baee9e74.js"><link rel="prefetch" href="/pro/assets/js/245.7766b233.js"><link rel="prefetch" href="/pro/assets/js/246.e4b61d5a.js"><link rel="prefetch" href="/pro/assets/js/247.bde7c556.js"><link rel="prefetch" href="/pro/assets/js/248.924860d4.js"><link rel="prefetch" href="/pro/assets/js/249.c87549f6.js"><link rel="prefetch" href="/pro/assets/js/25.6b9ef154.js"><link rel="prefetch" href="/pro/assets/js/250.590fe714.js"><link rel="prefetch" href="/pro/assets/js/251.4ae8a252.js"><link rel="prefetch" href="/pro/assets/js/252.18d350dc.js"><link rel="prefetch" href="/pro/assets/js/253.2748bc82.js"><link rel="prefetch" href="/pro/assets/js/254.cdd8375b.js"><link rel="prefetch" href="/pro/assets/js/255.7c748c30.js"><link rel="prefetch" href="/pro/assets/js/256.9276433a.js"><link rel="prefetch" href="/pro/assets/js/257.c7b13852.js"><link rel="prefetch" href="/pro/assets/js/258.a2357f59.js"><link rel="prefetch" href="/pro/assets/js/259.e85f4e89.js"><link rel="prefetch" href="/pro/assets/js/26.673d919c.js"><link rel="prefetch" href="/pro/assets/js/260.26747de9.js"><link rel="prefetch" href="/pro/assets/js/261.22382276.js"><link rel="prefetch" href="/pro/assets/js/262.31756a74.js"><link rel="prefetch" href="/pro/assets/js/263.f8eabe4d.js"><link rel="prefetch" href="/pro/assets/js/264.06f6e3a4.js"><link rel="prefetch" href="/pro/assets/js/265.b0e15121.js"><link rel="prefetch" href="/pro/assets/js/266.44f4bc59.js"><link rel="prefetch" href="/pro/assets/js/267.63dd20b5.js"><link rel="prefetch" href="/pro/assets/js/268.07e2c600.js"><link rel="prefetch" href="/pro/assets/js/269.e15bf2fe.js"><link rel="prefetch" href="/pro/assets/js/27.9837fb9c.js"><link rel="prefetch" href="/pro/assets/js/270.5ee91881.js"><link rel="prefetch" href="/pro/assets/js/271.cdc9dfee.js"><link rel="prefetch" href="/pro/assets/js/272.4d047eea.js"><link rel="prefetch" href="/pro/assets/js/273.8472d7b8.js"><link rel="prefetch" href="/pro/assets/js/274.b3a58455.js"><link rel="prefetch" href="/pro/assets/js/275.3928cdc5.js"><link rel="prefetch" href="/pro/assets/js/276.1e4a9acb.js"><link rel="prefetch" href="/pro/assets/js/277.86adc6b1.js"><link rel="prefetch" href="/pro/assets/js/278.ee116c86.js"><link rel="prefetch" href="/pro/assets/js/279.13716ecf.js"><link rel="prefetch" href="/pro/assets/js/28.dc286ee7.js"><link rel="prefetch" href="/pro/assets/js/280.304bb66c.js"><link rel="prefetch" href="/pro/assets/js/281.cb87e6df.js"><link rel="prefetch" href="/pro/assets/js/282.332df06b.js"><link rel="prefetch" href="/pro/assets/js/283.e175f771.js"><link rel="prefetch" href="/pro/assets/js/284.adfe8677.js"><link rel="prefetch" href="/pro/assets/js/285.2b9ddc25.js"><link rel="prefetch" href="/pro/assets/js/286.c6858854.js"><link rel="prefetch" href="/pro/assets/js/287.0cf41b14.js"><link rel="prefetch" href="/pro/assets/js/288.ff8130bf.js"><link rel="prefetch" href="/pro/assets/js/289.bc3f7f9c.js"><link rel="prefetch" href="/pro/assets/js/29.43baf2a9.js"><link rel="prefetch" href="/pro/assets/js/290.75ddf005.js"><link rel="prefetch" href="/pro/assets/js/291.05f625f0.js"><link rel="prefetch" href="/pro/assets/js/292.83c3b770.js"><link rel="prefetch" href="/pro/assets/js/293.9f678d18.js"><link rel="prefetch" href="/pro/assets/js/294.34c57094.js"><link rel="prefetch" href="/pro/assets/js/295.b26df8f3.js"><link rel="prefetch" href="/pro/assets/js/296.6dade539.js"><link rel="prefetch" href="/pro/assets/js/297.62843d30.js"><link rel="prefetch" href="/pro/assets/js/298.285685b1.js"><link rel="prefetch" href="/pro/assets/js/299.893ae364.js"><link rel="prefetch" href="/pro/assets/js/3.0b9758a9.js"><link rel="prefetch" href="/pro/assets/js/30.f2ca47e1.js"><link rel="prefetch" href="/pro/assets/js/300.371ae16e.js"><link rel="prefetch" href="/pro/assets/js/301.da1175d1.js"><link rel="prefetch" href="/pro/assets/js/302.886f50ba.js"><link rel="prefetch" href="/pro/assets/js/303.a4041c62.js"><link rel="prefetch" href="/pro/assets/js/304.86caf01e.js"><link rel="prefetch" href="/pro/assets/js/305.2e32a309.js"><link rel="prefetch" href="/pro/assets/js/306.6a266393.js"><link rel="prefetch" href="/pro/assets/js/307.a34b1931.js"><link rel="prefetch" href="/pro/assets/js/308.5b20f57c.js"><link rel="prefetch" href="/pro/assets/js/309.4763dca9.js"><link rel="prefetch" href="/pro/assets/js/31.1988cfaa.js"><link rel="prefetch" href="/pro/assets/js/310.fed041ba.js"><link rel="prefetch" href="/pro/assets/js/311.5096fc1b.js"><link rel="prefetch" href="/pro/assets/js/312.441b486e.js"><link rel="prefetch" href="/pro/assets/js/313.2998ae57.js"><link rel="prefetch" href="/pro/assets/js/314.4ef5d7b8.js"><link rel="prefetch" href="/pro/assets/js/315.16e0fa89.js"><link rel="prefetch" href="/pro/assets/js/316.e00e1d07.js"><link rel="prefetch" href="/pro/assets/js/317.1735a97f.js"><link rel="prefetch" href="/pro/assets/js/318.00c9f87d.js"><link rel="prefetch" href="/pro/assets/js/319.7d5eff35.js"><link rel="prefetch" href="/pro/assets/js/32.0a71739b.js"><link rel="prefetch" href="/pro/assets/js/320.a8123618.js"><link rel="prefetch" href="/pro/assets/js/321.9e4c3d7a.js"><link rel="prefetch" href="/pro/assets/js/322.ab5ecb28.js"><link rel="prefetch" href="/pro/assets/js/323.f5c0b737.js"><link rel="prefetch" href="/pro/assets/js/324.a4bc7818.js"><link rel="prefetch" href="/pro/assets/js/325.e7fc190c.js"><link rel="prefetch" href="/pro/assets/js/326.80bbdd10.js"><link rel="prefetch" href="/pro/assets/js/327.45c093dd.js"><link rel="prefetch" href="/pro/assets/js/328.431b7399.js"><link rel="prefetch" href="/pro/assets/js/329.3add1306.js"><link rel="prefetch" href="/pro/assets/js/33.df0d811a.js"><link rel="prefetch" href="/pro/assets/js/330.14d15f0c.js"><link rel="prefetch" href="/pro/assets/js/331.8c4fd151.js"><link rel="prefetch" href="/pro/assets/js/332.28ee4049.js"><link rel="prefetch" href="/pro/assets/js/333.b977a795.js"><link rel="prefetch" href="/pro/assets/js/334.dd6b6fd1.js"><link rel="prefetch" href="/pro/assets/js/335.82203c90.js"><link rel="prefetch" href="/pro/assets/js/336.6c07fd3d.js"><link rel="prefetch" href="/pro/assets/js/337.f58c8629.js"><link rel="prefetch" href="/pro/assets/js/338.e58ba306.js"><link rel="prefetch" href="/pro/assets/js/339.1900197d.js"><link rel="prefetch" href="/pro/assets/js/34.2a8f8418.js"><link rel="prefetch" href="/pro/assets/js/340.cd5d4675.js"><link rel="prefetch" href="/pro/assets/js/341.6b5ed662.js"><link rel="prefetch" href="/pro/assets/js/342.6c5f57cc.js"><link rel="prefetch" href="/pro/assets/js/343.58cff14f.js"><link rel="prefetch" href="/pro/assets/js/344.b7765355.js"><link rel="prefetch" href="/pro/assets/js/345.2d65a418.js"><link rel="prefetch" href="/pro/assets/js/346.82a96961.js"><link rel="prefetch" href="/pro/assets/js/347.b8a83511.js"><link rel="prefetch" href="/pro/assets/js/348.d4393f9d.js"><link rel="prefetch" href="/pro/assets/js/349.7a00a6cc.js"><link rel="prefetch" href="/pro/assets/js/35.b3f49ff7.js"><link rel="prefetch" href="/pro/assets/js/350.d55f5468.js"><link rel="prefetch" href="/pro/assets/js/351.532c0e06.js"><link rel="prefetch" href="/pro/assets/js/352.13982ed7.js"><link rel="prefetch" href="/pro/assets/js/353.69fe3cba.js"><link rel="prefetch" href="/pro/assets/js/354.18e86855.js"><link rel="prefetch" href="/pro/assets/js/355.4ced7d6e.js"><link rel="prefetch" href="/pro/assets/js/356.7d4e999e.js"><link rel="prefetch" href="/pro/assets/js/357.053f5e40.js"><link rel="prefetch" href="/pro/assets/js/358.d8ac2755.js"><link rel="prefetch" href="/pro/assets/js/359.76b7caad.js"><link rel="prefetch" href="/pro/assets/js/36.ce64d94f.js"><link rel="prefetch" href="/pro/assets/js/360.a13d1dd7.js"><link rel="prefetch" href="/pro/assets/js/361.88e34ed9.js"><link rel="prefetch" href="/pro/assets/js/362.6c6c67c6.js"><link rel="prefetch" href="/pro/assets/js/363.95c8f9e5.js"><link rel="prefetch" href="/pro/assets/js/364.6f7d5d25.js"><link rel="prefetch" href="/pro/assets/js/365.652862b2.js"><link rel="prefetch" href="/pro/assets/js/366.1a62c305.js"><link rel="prefetch" href="/pro/assets/js/367.105d9c75.js"><link rel="prefetch" href="/pro/assets/js/368.76a437fb.js"><link rel="prefetch" href="/pro/assets/js/369.3befbc83.js"><link rel="prefetch" href="/pro/assets/js/37.4a12a54e.js"><link rel="prefetch" href="/pro/assets/js/370.50bc739d.js"><link rel="prefetch" href="/pro/assets/js/371.cb673698.js"><link rel="prefetch" href="/pro/assets/js/372.0c0a6cde.js"><link rel="prefetch" href="/pro/assets/js/373.59d4ca83.js"><link rel="prefetch" href="/pro/assets/js/374.d4917e09.js"><link rel="prefetch" href="/pro/assets/js/375.7dd72cbe.js"><link rel="prefetch" href="/pro/assets/js/376.d0b5fde8.js"><link rel="prefetch" href="/pro/assets/js/377.ab07d392.js"><link rel="prefetch" href="/pro/assets/js/378.7626ebe8.js"><link rel="prefetch" href="/pro/assets/js/379.432a4290.js"><link rel="prefetch" href="/pro/assets/js/38.d889b025.js"><link rel="prefetch" href="/pro/assets/js/380.29ba37f6.js"><link rel="prefetch" href="/pro/assets/js/381.08eab60e.js"><link rel="prefetch" href="/pro/assets/js/382.c9900324.js"><link rel="prefetch" href="/pro/assets/js/383.d3a1668f.js"><link rel="prefetch" href="/pro/assets/js/384.3c5cd507.js"><link rel="prefetch" href="/pro/assets/js/385.4255b69c.js"><link rel="prefetch" href="/pro/assets/js/386.e63bb073.js"><link rel="prefetch" href="/pro/assets/js/387.807ba34d.js"><link rel="prefetch" href="/pro/assets/js/388.baa3cd6a.js"><link rel="prefetch" href="/pro/assets/js/389.96126282.js"><link rel="prefetch" href="/pro/assets/js/39.63ce8391.js"><link rel="prefetch" href="/pro/assets/js/390.15f0243d.js"><link rel="prefetch" href="/pro/assets/js/391.35968c20.js"><link rel="prefetch" href="/pro/assets/js/392.526c7d60.js"><link rel="prefetch" href="/pro/assets/js/393.06e2277f.js"><link rel="prefetch" href="/pro/assets/js/394.78a03ded.js"><link rel="prefetch" href="/pro/assets/js/395.e83a3bc7.js"><link rel="prefetch" href="/pro/assets/js/396.dbadc8d9.js"><link rel="prefetch" href="/pro/assets/js/397.0ab255a8.js"><link rel="prefetch" href="/pro/assets/js/398.9b01a783.js"><link rel="prefetch" href="/pro/assets/js/399.b674e81e.js"><link rel="prefetch" href="/pro/assets/js/4.dad69f74.js"><link rel="prefetch" href="/pro/assets/js/40.9860fe4d.js"><link rel="prefetch" href="/pro/assets/js/400.4af485f8.js"><link rel="prefetch" href="/pro/assets/js/401.380e31db.js"><link rel="prefetch" href="/pro/assets/js/402.f6cbabfd.js"><link rel="prefetch" href="/pro/assets/js/403.f7ad4a5a.js"><link rel="prefetch" href="/pro/assets/js/404.e892afe5.js"><link rel="prefetch" href="/pro/assets/js/405.a4703117.js"><link rel="prefetch" href="/pro/assets/js/406.29b8ec7b.js"><link rel="prefetch" href="/pro/assets/js/407.27d19604.js"><link rel="prefetch" href="/pro/assets/js/408.beafd6ce.js"><link rel="prefetch" href="/pro/assets/js/409.d8cf7137.js"><link rel="prefetch" href="/pro/assets/js/41.396c7131.js"><link rel="prefetch" href="/pro/assets/js/410.6c03fa8f.js"><link rel="prefetch" href="/pro/assets/js/411.9b0d2c49.js"><link rel="prefetch" href="/pro/assets/js/412.16f83eb9.js"><link rel="prefetch" href="/pro/assets/js/413.3add5e5c.js"><link rel="prefetch" href="/pro/assets/js/414.32124ea4.js"><link rel="prefetch" href="/pro/assets/js/415.0b22c5f9.js"><link rel="prefetch" href="/pro/assets/js/416.2196999f.js"><link rel="prefetch" href="/pro/assets/js/417.274dc4e8.js"><link rel="prefetch" href="/pro/assets/js/418.59f3311f.js"><link rel="prefetch" href="/pro/assets/js/419.0babd5a2.js"><link rel="prefetch" href="/pro/assets/js/42.95d04b81.js"><link rel="prefetch" href="/pro/assets/js/420.054d2f15.js"><link rel="prefetch" href="/pro/assets/js/421.3da639ba.js"><link rel="prefetch" href="/pro/assets/js/422.6e30ec5e.js"><link rel="prefetch" href="/pro/assets/js/423.91dff77d.js"><link rel="prefetch" href="/pro/assets/js/424.0d89c573.js"><link rel="prefetch" href="/pro/assets/js/425.740ab861.js"><link rel="prefetch" href="/pro/assets/js/426.96d3a8f2.js"><link rel="prefetch" href="/pro/assets/js/427.34a98a3a.js"><link rel="prefetch" href="/pro/assets/js/428.6910ade2.js"><link rel="prefetch" href="/pro/assets/js/429.ebb880da.js"><link rel="prefetch" href="/pro/assets/js/43.0d75a841.js"><link rel="prefetch" href="/pro/assets/js/430.46929b2e.js"><link rel="prefetch" href="/pro/assets/js/44.70145ca3.js"><link rel="prefetch" href="/pro/assets/js/45.dbfba886.js"><link rel="prefetch" href="/pro/assets/js/46.0c2773ca.js"><link rel="prefetch" href="/pro/assets/js/47.9b793d88.js"><link rel="prefetch" href="/pro/assets/js/48.82a29250.js"><link rel="prefetch" href="/pro/assets/js/49.3f07662a.js"><link rel="prefetch" href="/pro/assets/js/5.1036e105.js"><link rel="prefetch" href="/pro/assets/js/50.f58b76f6.js"><link rel="prefetch" href="/pro/assets/js/51.7d3bc0fe.js"><link rel="prefetch" href="/pro/assets/js/52.6836145b.js"><link rel="prefetch" href="/pro/assets/js/53.50a70ad6.js"><link rel="prefetch" href="/pro/assets/js/54.8417075e.js"><link rel="prefetch" href="/pro/assets/js/55.f9d198a9.js"><link rel="prefetch" href="/pro/assets/js/56.9184ecfd.js"><link rel="prefetch" href="/pro/assets/js/57.94e11a2b.js"><link rel="prefetch" href="/pro/assets/js/58.ba181fa2.js"><link rel="prefetch" href="/pro/assets/js/59.a6897b91.js"><link rel="prefetch" href="/pro/assets/js/60.fb7f9a23.js"><link rel="prefetch" href="/pro/assets/js/61.2f27f27f.js"><link rel="prefetch" href="/pro/assets/js/63.fb3af7d4.js"><link rel="prefetch" href="/pro/assets/js/64.45df2d7b.js"><link rel="prefetch" href="/pro/assets/js/65.185d58e2.js"><link rel="prefetch" href="/pro/assets/js/66.17d67747.js"><link rel="prefetch" href="/pro/assets/js/67.87e0d94f.js"><link rel="prefetch" href="/pro/assets/js/68.501208d1.js"><link rel="prefetch" href="/pro/assets/js/69.4c88d7ac.js"><link rel="prefetch" href="/pro/assets/js/7.3cb6883a.js"><link rel="prefetch" href="/pro/assets/js/70.ab26fd84.js"><link rel="prefetch" href="/pro/assets/js/71.6cd7bd7c.js"><link rel="prefetch" href="/pro/assets/js/72.48275bf1.js"><link rel="prefetch" href="/pro/assets/js/73.0908ee8d.js"><link rel="prefetch" href="/pro/assets/js/74.2495b0c8.js"><link rel="prefetch" href="/pro/assets/js/75.d1cef522.js"><link rel="prefetch" href="/pro/assets/js/76.90e07d4c.js"><link rel="prefetch" href="/pro/assets/js/77.abc45d26.js"><link rel="prefetch" href="/pro/assets/js/78.59485da7.js"><link rel="prefetch" href="/pro/assets/js/79.37437ffc.js"><link rel="prefetch" href="/pro/assets/js/8.362f6bbe.js"><link rel="prefetch" href="/pro/assets/js/80.ca186225.js"><link rel="prefetch" href="/pro/assets/js/81.07b83413.js"><link rel="prefetch" href="/pro/assets/js/82.f44d353b.js"><link rel="prefetch" href="/pro/assets/js/83.50b20e3a.js"><link rel="prefetch" href="/pro/assets/js/84.a6ffd4eb.js"><link rel="prefetch" href="/pro/assets/js/85.56e306a1.js"><link rel="prefetch" href="/pro/assets/js/86.d829e6d3.js"><link rel="prefetch" href="/pro/assets/js/87.f6642f38.js"><link rel="prefetch" href="/pro/assets/js/88.7f8f5f67.js"><link rel="prefetch" href="/pro/assets/js/89.603d3701.js"><link rel="prefetch" href="/pro/assets/js/9.866facac.js"><link rel="prefetch" href="/pro/assets/js/90.088785b0.js"><link rel="prefetch" href="/pro/assets/js/91.c0b34f80.js"><link rel="prefetch" href="/pro/assets/js/92.69aaa302.js"><link rel="prefetch" href="/pro/assets/js/93.00485bbd.js"><link rel="prefetch" href="/pro/assets/js/94.8cedc56f.js"><link rel="prefetch" href="/pro/assets/js/95.371cd790.js"><link rel="prefetch" href="/pro/assets/js/96.3aec3001.js"><link rel="prefetch" href="/pro/assets/js/97.858b2ebf.js"><link rel="prefetch" href="/pro/assets/js/98.fc140c52.js"><link rel="prefetch" href="/pro/assets/js/99.d3de64c4.js">
    <link rel="stylesheet" href="/pro/assets/css/0.styles.0f33a937.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/pro/" class="home-link router-link-active"><!----> <span class="site-name">JavaDocs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1、功能清单">1、功能清单</a></li><li><a href="#_2、创建购物车模型">2、创建购物车模型</a><ul><li><a href="#_1购物车详情类-cartitem">①购物车详情类：CartItem</a></li><li><a href="#_2购物车类-cart">②购物车类：Cart</a></li></ul></li><li><a href="#_3、添加购物车功能">3、添加购物车功能</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li><li><a href="#_4css样式">④CSS样式</a></li></ul></li><li><a href="#_4、显示购物车页面">4、显示购物车页面</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li></ul></li><li><a href="#_5、清空购物车">5、清空购物车</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li></ul></li><li><a href="#_6、减号">6、减号</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3后端代码">③后端代码</a></li><li><a href="#_4前端代码">④前端代码</a></li></ul></li><li><a href="#_7、删除">7、删除</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li></ul></li><li><a href="#_8、文本框修改">8、文本框修改</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li></ul></li><li><a href="#_9、加号">9、加号</a><ul><li><a href="#_1目标">①目标</a></li><li><a href="#_2思路">②思路</a></li><li><a href="#_3代码实现">③代码实现</a></li></ul></li><li><a href="#_10、double数据运算过程中精度调整">10、Double数据运算过程中精度调整</a><ul><li><a href="#_1问题现象">①问题现象</a></li><li><a href="#_2解决方案">②解决方案</a></li></ul></li></ul></div><p></p> <h1 id="第三节-购物车"><a href="#第三节-购物车" class="header-anchor">#</a> 第三节 购物车</h1> <h2 id="_1、功能清单"><a href="#_1、功能清单" class="header-anchor">#</a> 1、功能清单</h2> <ul><li>添加购物车</li> <li>显示购物车信息</li> <li>修改购物车中具体商品的数量</li> <li>删除购物车中某个具体商品</li> <li>清空购物车</li></ul> <h2 id="_2、创建购物车模型"><a href="#_2、创建购物车模型" class="header-anchor">#</a> 2、创建购物车模型</h2> <p><img src="/pro/assets/img/img007.b7bb3fd9.png" alt="./images"></p> <h3 id="_1购物车详情类-cartitem"><a href="#_1购物车详情类-cartitem" class="header-anchor">#</a> ①购物车详情类：CartItem</h3> <p><img src="data:image/png;base64,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" alt="./images"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> bookId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bookName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> count<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> amount<span class="token punctuation">;</span>
    
    <span class="token comment">// 获取金额时需要计算得到</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2购物车类-cart"><a href="#_2购物车类-cart" class="header-anchor">#</a> ②购物车类：Cart</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 添加购物车</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCartItem</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1.获取当前Book对象的id值</span>
        <span class="token class-name">String</span> bookId <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.根据id值到Map中检查是否已存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItemMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 3.如果存在，则给原有的CartItem增加数量</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">int</span> newCount <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 4.如果不存在，则创建新的CartItem对象</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookId</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookName</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setImgPath</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 5.将新的CartItem对象存入cartItemMap</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span> cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 从购物车中删除CartItem</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 把某个CartItem的数量修改为指定值</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateItemCount</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> newCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 根据bookId从Map中获取对应的CartItem对象</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置新的数量值</span>
        cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 把某个CartItem的数量+1</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">itemCountIncrease</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 把某个CartItem的数量-1</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">itemCountDecrease</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">removeCartItem</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算总数量</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1.声明一个变量用于存储累加结果</span>
        <span class="token class-name">Integer</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.遍历Map集合</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keySet <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Integer</span> count <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sum <span class="token operator">=</span> sum <span class="token operator">+</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 3.返回累加结果</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算总金额</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1.声明一个变量用于存储累加结果</span>
        <span class="token class-name">Double</span> sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.遍历Map集合</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keySet <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Double</span> amount <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            sum <span class="token operator">=</span> sum <span class="token operator">+</span> amount<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 3.返回累加结果</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h2 id="_3、添加购物车功能"><a href="#_3、添加购物车功能" class="header-anchor">#</a> 3、添加购物车功能</h2> <h3 id="_1目标"><a href="#_1目标" class="header-anchor">#</a> ①目标</h3> <p>在首页点击『加入购物车』将该条图书加入『购物车』。</p> <h3 id="_2思路"><a href="#_2思路" class="header-anchor">#</a> ②思路</h3> <p>首页→加入购物车→CartServlet.addCart()→执行添加操作→回到首页</p> <h3 id="_3代码实现"><a href="#_3代码实现" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-创建cartservlet"><a href="#_1-创建cartservlet" class="header-anchor">#</a> [1]创建CartServlet</h4> <p><img src="data:image/png;base64,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" alt="./images"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartServlet</span> <span class="token keyword">extends</span> <span class="token class-name">ModelBaseServlet</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1.从请求参数中获取bookId</span>
        <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.根据bookId查询图书数据</span>
        <span class="token class-name">Book</span> book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">getBookById</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.获取Session对象</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.尝试从Session域获取购物车对象</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 5.判断Cart对象是否存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// 6.如果不存在，则创建新的Cart对象</span>
            cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 7.将新创建的Cart对象存入Session域</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 8.添加购物车</span>
        cart<span class="token punctuation">.</span><span class="token function">addCartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 9.回首页</span>
        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="_2-index-html页面"><a href="#_2-index-html页面" class="header-anchor">#</a> [2]index.html页面</h4> <p>购物车数量显示：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--          登录后风格--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.user != null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>欢迎你<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.user.userName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>张总<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注销<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pages/cart/cart.jsp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        购物车
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pages/manager/book_manager.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>后台管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>加入购物车：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${not #lists.isEmpty(bookList)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book : ${bookList}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.imgPath}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/uploads/huozhe.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>书名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.bookName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>活着<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>作者:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.author}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>余华<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>价格:￥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>66.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>销量:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.sales}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>230<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>库存:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.stock}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--&lt;button&gt;加入购物车&lt;/button&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/CartServlet(method=addCart,bookId=${book.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加入购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_4css样式"><a href="#_4css样式" class="header-anchor">#</a> ④CSS样式</h3> <p><img src="data:image/png;base64,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" alt="./images"></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.books-list .list-content .list-item a</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #39987c<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span>pointer<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span>12px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如果修改完成后页面效果没有改变，可以使用Ctrl+F5强制刷新。</p> <h2 id="_4、显示购物车页面"><a href="#_4、显示购物车页面" class="header-anchor">#</a> 4、显示购物车页面</h2> <h3 id="_1目标-2"><a href="#_1目标-2" class="header-anchor">#</a> ①目标</h3> <p>把购物车信息在专门的页面显示出来</p> <h3 id="_2思路-2"><a href="#_2思路-2" class="header-anchor">#</a> ②思路</h3> <p>首页→购物车超链接→CartServlet.showCart()→cart.html</p> <h3 id="_3代码实现-2"><a href="#_3代码实现-2" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-购物车超链接"><a href="#_1-购物车超链接" class="header-anchor">#</a> [1]购物车超链接</h4> <p>登录状态和未登录状态</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CartServlet?method=showCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-cartservlet"><a href="#_2-cartservlet" class="header-anchor">#</a> [2]CartServlet</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">showCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-cart-html"><a href="#_3-cart-html" class="header-anchor">#</a> [3]cart.html</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    ……
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>segment/welcome :: welcome-page<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    ……
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart == null || session.cart.cartItemMap.size() == 0}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>购物车还是空空的，赶紧去添加吧！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null &amp;&amp; session.cart.cartItemMap.size() &gt; 0}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItemEntry : ${session.cart.cartItemMap}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.imgPath}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/uploads/huozhe.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>活着<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.count}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.amount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart != null &amp;&amp; session.cart.cartItemMap.size() &gt; 0}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清空购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>继续购物<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>共<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalCount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>件商品<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total-price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>总金额<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.cart.totalAmount}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>99.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkout.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去结账<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_5、清空购物车"><a href="#_5、清空购物车" class="header-anchor">#</a> 5、清空购物车</h2> <h3 id="_1目标-3"><a href="#_1目标-3" class="header-anchor">#</a> ①目标</h3> <p>当用户确定点击清空购物车，将Session域中的Cart对象移除。</p> <h3 id="_2思路-3"><a href="#_2思路-3" class="header-anchor">#</a> ②思路</h3> <p>cart.html→清空购物车超链接→绑定单击响应函数→confirm()确认→确定→CartServlet.clearCart()→从Session域移除Cart对象</p> <h3 id="_3代码实现-3"><a href="#_3代码实现-3" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-清空购物车超链接"><a href="#_1-清空购物车超链接" class="header-anchor">#</a> [1]清空购物车超链接</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CartServlet?method=clearCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清空购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-绑定单击响应函数"><a href="#_2-绑定单击响应函数" class="header-anchor">#</a> [2]绑定单击响应函数</h4> <h5 id="_1-引入vue"><a href="#_1-引入vue" class="header-anchor">#</a> (1)引入Vue</h5> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/vue.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-编写vue代码"><a href="#_2-编写vue代码" class="header-anchor">#</a> (2)编写Vue代码</h5> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#appCart&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string">&quot;clearCart&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 1.使用confirm()弹框向用户确认是否要清空</span>
            <span class="token keyword">var</span> confirmResult <span class="token operator">=</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;您真的要清空购物车吗？&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 2.如果用户点击了取消</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>confirmResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token comment">// 3.调用事件对象的方法阻止超链接跳转页面</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_3-cartservlet-clearcart"><a href="#_3-cartservlet-clearcart" class="header-anchor">#</a> [3]CartServlet.clearCart()</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">clearCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 1.通过request对象获取Session对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2.将Session域的Cart对象移除</span>
    session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.渲染视图</span>
    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_6、减号"><a href="#_6、减号" class="header-anchor">#</a> 6、减号</h2> <h3 id="_1目标-4"><a href="#_1目标-4" class="header-anchor">#</a> ①目标</h3> <ul><li>在大于1的数值基础上-1：执行-1的逻辑</li> <li>在1的基础上-1：执行删除item的逻辑</li></ul> <h3 id="_2思路-4"><a href="#_2思路-4" class="header-anchor">#</a> ②思路</h3> <p>减号span绑定单击响应函数→获取文本框中的数据：当前数量→检查数量是否大于1</p> <ul><li>数量大于1：发送请求访问CartServlet.decrease()方法→回到cart.html</li> <li>数量等于1：confirm确认→发送请求访问CartServlet.removeItem()方法→回到cart.html</li></ul> <h3 id="_3后端代码"><a href="#_3后端代码" class="header-anchor">#</a> ③后端代码</h3> <p>CartServlet.decrease()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">decrease</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.通过请求参数获取bookId</span>
    <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.通过request对象获取Session对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.从Session域获取购物车对象</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ※考虑到如果Session超时会导致购物车数据丢失，所以先判断购物车数据是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 4.从购物车对象中根据bookId执行-1操作</span>
        cart<span class="token punctuation">.</span><span class="token function">itemCountDecrease</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 5.回到购物车页面</span>
    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_4前端代码"><a href="#_4前端代码" class="header-anchor">#</a> ④前端代码</h3> <p>HTML代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookId<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookId}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDecrease<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    ……
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Vue代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">,</span>
<span class="token string">&quot;itemDecrease&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 0.不管执行两种逻辑中的哪一种，都需要将当前item的bookId发送到Servlet</span>
    <span class="token comment">// event：事件对象</span>
    <span class="token comment">// event.target：当前事件操作的控件（HTML元素）</span>
    <span class="token comment">// previousSibling：上一个兄弟节点。当前span标签的上一个兄弟节点是空格，所以要再找上一个兄弟</span>
    <span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>previousSibling<span class="token punctuation">.</span>previousSibling<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 1.获取文本框中的value属性值：当前item的数量</span>
    <span class="token comment">// event：事件对象</span>
    <span class="token comment">// event.target：当前事件操作的控件（HTML元素）</span>
    <span class="token comment">// nextSibling：下一个兄弟节点。当前span标签的下一个兄弟节点是空格，所以要再找下一个兄弟</span>
    <span class="token comment">// value：获取input标签的value属性值</span>
    <span class="token keyword">var</span> currentCount <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nextSibling<span class="token punctuation">.</span>nextSibling<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;currentCount=&quot;</span><span class="token operator">+</span>currentCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.判断currentCount是否大于1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentCount <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 3.应用-1逻辑</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;currentCount &gt; 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;CartServlet?method=decrease&amp;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        <span class="token comment">// 通过DOM树形结构获取图书名称数据</span>
        <span class="token comment">// event：事件对象</span>
        <span class="token comment">// event.target：当前事件操作的控件（HTML元素）</span>
        <span class="token comment">// parentNode：访问父节点</span>
        <span class="token comment">// parentNode.getElementsByTagName()：在父节点范围内根据标签名称查找元素，返回数组</span>
        <span class="token comment">// innerHTML：返回标签内部HTML代码</span>
        <span class="token keyword">var</span> bookName <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;td&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>

        <span class="token comment">// 4.应用删除item的逻辑</span>
        <span class="token keyword">var</span> confirmResult <span class="token operator">=</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;你真的要从购物车中删除『&quot;</span><span class="token operator">+</span>bookName<span class="token operator">+</span><span class="token string">&quot;』这条记录吗？&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>confirmResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;CartServlet?method=removeItem&amp;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="_7、删除"><a href="#_7、删除" class="header-anchor">#</a> 7、删除</h2> <h3 id="_1目标-5"><a href="#_1目标-5" class="header-anchor">#</a> ①目标</h3> <p>点击删除超链接后，把对应的CartItem从Cart中删除</p> <h3 id="_2思路-5"><a href="#_2思路-5" class="header-anchor">#</a> ②思路</h3> <p>cart.html→删除超链接→CartServlet.removeItem()→回到cart.html</p> <h3 id="_3代码实现-4"><a href="#_3代码实现-4" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-后端代码"><a href="#_1-后端代码" class="header-anchor">#</a> [1]后端代码</h4> <p>CartServlet.removeItem()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.从请求参数获取bookId</span>
    <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.通过request对象获取Session对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.从Session域获取购物车对象</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ※考虑到如果Session超时会导致购物车数据丢失，所以先判断购物车数据是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 4.执行删除item操作</span>
        cart<span class="token punctuation">.</span><span class="token function">removeCartItem</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 5.回到购物车页面</span>
    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_2-前端代码"><a href="#_2-前端代码" class="header-anchor">#</a> [2]前端代码</h4> <p>HTML代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeConfirm<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/CartServlet(method=removeItem,bookId=${cartItemEntry.value.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Vue代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">,</span>
<span class="token string">&quot;removeConfirm&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 通过DOM树形结构获取图书名称数据</span>
    <span class="token comment">// event：事件对象</span>
    <span class="token comment">// event.target：当前事件操作的控件（HTML元素）</span>
    <span class="token comment">// parentNode：访问父节点</span>
    <span class="token comment">// parentNode.getElementsByTagName()：在父节点范围内根据标签名称查找元素，返回数组</span>
    <span class="token comment">// innerHTML：返回标签内部HTML代码</span>
    <span class="token keyword">var</span> bookName <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;td&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bookName=&quot;</span> <span class="token operator">+</span> bookName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;你真的要从购物车中删除『&quot;</span><span class="token operator">+</span>bookName<span class="token operator">+</span><span class="token string">&quot;』这条记录吗？&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_8、文本框修改"><a href="#_8、文本框修改" class="header-anchor">#</a> 8、文本框修改</h2> <h3 id="_1目标-6"><a href="#_1目标-6" class="header-anchor">#</a> ①目标</h3> <p>用户在文本框输入新数据后，根据用户输入在Session中的Cart中修改CartItem中的count</p> <h3 id="_2思路-6"><a href="#_2思路-6" class="header-anchor">#</a> ②思路</h3> <p>cart.html→前端数据校验→CartServlet.changeCount()→回到cart.html</p> <h3 id="_3代码实现-5"><a href="#_3代码实现-5" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-后端代码-2"><a href="#_1-后端代码-2" class="header-anchor">#</a> [1]后端代码</h4> <p>CartServlet.changeCount()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">changeCount</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.从请求参数获取bookId和newCount</span>
    <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> newCount <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;newCount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.通过request对象获取Session对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.从Session域获取购物车对象</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ※考虑到如果Session超时会导致购物车数据丢失，所以先判断购物车数据是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 4.执行修改数量操作</span>
        cart<span class="token punctuation">.</span><span class="token function">updateItemCount</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span> newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 5.回到购物车页面</span>
    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_2-前端代码-2"><a href="#_2-前端代码-2" class="header-anchor">#</a> [2]前端代码</h4> <p>HTML代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookId<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookId}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    ……
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemCountChange<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.count}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    ……
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Vue代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">,</span>
<span class="token string">&quot;itemCountChange&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.获取文本框中输入的数据</span>
	<span class="token keyword">var</span> newCount <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

	<span class="token comment">// 6.排除小数或零或负数的情况</span>
	<span class="token keyword">var</span> regExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>regExp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>newCount<span class="token punctuation">)</span> <span class="token operator">||</span> newCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// 7.如果用户输入的数据不是数字，给出提示</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;请输入正整数！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 8.将文本框恢复为默认值</span>
		event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span>

		<span class="token comment">// 9.当前函数停止执行</span>
		<span class="token keyword">return</span> <span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 10.获取bookId值</span>
	<span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 11.发送请求执行修改</span>
	window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;CartServlet?method=changeCount&amp;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token operator">+</span><span class="token string">&quot;&amp;newCount=&quot;</span><span class="token operator">+</span>newCount<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_9、加号"><a href="#_9、加号" class="header-anchor">#</a> 9、加号</h2> <h3 id="_1目标-7"><a href="#_1目标-7" class="header-anchor">#</a> ①目标</h3> <p>告诉Servlet将Session域中Cart对象里面对应的CartItem执行count+1操作</p> <h3 id="_2思路-7"><a href="#_2思路-7" class="header-anchor">#</a> ②思路</h3> <p>加号span绑定单击响应函数→获取文本框中的数据：当前数量→CartServlet.increase()→回到cart.html</p> <h3 id="_3代码实现-6"><a href="#_3代码实现-6" class="header-anchor">#</a> ③代码实现</h3> <h4 id="_1-后端代码-3"><a href="#_1-后端代码-3" class="header-anchor">#</a> [1]后端代码</h4> <p>CartServlet.increase()</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.通过请求参数获取bookId</span>
    <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.通过request对象获取Session对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.从Session域获取购物车对象</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ※考虑到如果Session超时会导致购物车数据丢失，所以先判断购物车数据是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 4.从购物车对象中根据bookId执行-1操作</span>
        cart<span class="token punctuation">.</span><span class="token function">itemCountIncrease</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 5.回到购物车页面</span>
    <span class="token class-name">String</span> viewName <span class="token operator">=</span> <span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">;</span>

    <span class="token function">processTemplate</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_2-前端代码-3"><a href="#_2-前端代码-3" class="header-anchor">#</a> [2]前端代码</h4> <p>HTML代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookId<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${cartItemEntry.value.bookId}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    ……
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemIncrease<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Vue代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">,</span>
<span class="token string">&quot;itemIncrease&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.获取bookId值</span>
	<span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

	<span class="token comment">// 2.发送请求执行+1</span>
	window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;CartServlet?method=increase&amp;bookId=&quot;</span><span class="token operator">+</span>bookId<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_10、double数据运算过程中精度调整"><a href="#_10、double数据运算过程中精度调整" class="header-anchor">#</a> 10、Double数据运算过程中精度调整</h2> <h3 id="_1问题现象"><a href="#_1问题现象" class="header-anchor">#</a> ①问题现象</h3> <p><img src="data:image/png;base64,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" alt="./images"></p> <h3 id="_2解决方案"><a href="#_2解决方案" class="header-anchor">#</a> ②解决方案</h3> <ul><li>使用BigDecimal类型来进行Double类型数据运算</li> <li>创建BigDecimal类型对象时将Double类型的数据转换为字符串</li></ul> <p>Cart类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 计算总金额</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.声明一个变量用于存储累加结果</span>
    <span class="token class-name">BigDecimal</span> sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.遍历Map集合</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keySet <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Double</span> amount <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        sum <span class="token operator">=</span> sum<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3.返回累加结果</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>CartItem类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取金额时需要计算得到</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">BigDecimal</span> bigDecimalCount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> bigDecimalPrice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">BigDecimal</span> multiReuslt <span class="token operator">=</span> bigDecimalCount<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>bigDecimalPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> multiReuslt<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a href="/pro/pro001-fengJie/pro001-javaweb/lecture/bookstore04/verse02.html">上一节</a> <a href="/pro/pro001-fengJie/pro001-javaweb/lecture/bookstore04/index.html">回目录</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/pro/assets/js/app.fc49af57.js" defer></script><script src="/pro/assets/js/6.72f294c0.js" defer></script><script src="/pro/assets/js/62.d9a2c8d3.js" defer></script>
  </body>
</html>
